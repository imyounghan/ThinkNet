<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" default-lazy="false" assembly="ThinkNet" namespace="ThinkNet.Infrastructure.Storage">
  <class name="EventData" table="thinknet_events" lazy="false">
    <composite-id>
      <key-property name="AggregateId" type="string" column="AggregateId" />
      <key-property name="AggregateTypeCode" type="int" column="AggregateTypeCode"/>
      <key-property name="Version" type="int" column="Version"/>
    </composite-id>

    <property name="EventId" column="EventId" generated="insert" type="long"  />
    <property name="AggregateRootTypeName" column="AggregateRootTypeName" type="string"  />
    <property name="CorrelationId" column="CorrelationId" type="string" length="32"  />
    <property name="Timestamp" column="OnCreated" type="DateTime"  />

    <bag name="Items" cascade="all" inverse="true">
      <key column="EventId" />
      <one-to-many class="EventDataItem" />
    </bag>
  </class>
</hibernate-mapping>